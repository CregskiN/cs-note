# 实例化

一直以来每渲染一个物体，都是：

```c++
for(unsigned int i = 0; i < amount_of_models_to_draw; i++)
{
    DoSomePreparations(); // 绑定VAO，绑定纹理，设置uniform等
    glDrawArrays(GL_TRIANGLES, 0, amount_of_vertices);
}
```

实际上，每次调用 glDrawArrays、glDrawElements 都是用 CPU 向 GPU 传输一次指令、数据，当要渲染的大量相同的物体时，多次传输时一种很浪费的操作。

是否可以仅传输一次数据到 GPU，此后的渲染都从这一份数据中读取？

**实例化**

实例化这项技术能够让我们使用一个渲染调用来绘制多个物体，来节省每次绘制物体时CPU -> GPU的通信，它只需要一次即可。

```c++
glDrawArrays -> glDrawArraysInstanced
glDrawElements -> glDrawElementsInstanced
```



当然不能渲染 100 次出现在同一位置的物体，依次对每个顶点操作的方法：gl_VertexID，传给 VS 一个 uniform offset 数组



# 实例化数组

uniform 数组有 100 个元素的限制

